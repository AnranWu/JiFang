### 前置知识

#### 一、权值线段树

对于一个给定的数组，

<u>普通线段树</u>可以**维护某个子数组中数的和**

<u>权值线段树</u>可以**维护某个区间内数组元素出现的次数**



在实现上，由于值域范围通常较大，权值线段树会采用离散化或动态开点的策略优化空间。

单次操作时间复杂度o(logn)。



**基本作用：**

查询第k小或第k大。

（这里要注意！我们只能对给定数列解决**整个数列**的第k大/小，并不能解决**数列的子区间**的第k大/小。）

(解决数列子区间的第k大/小需要**主席树**（可持久化线段树）)

查询某个数排名。

查询整个数组的排序。

查询前驱和后继（比某个数小的最大值，比某个数大的最小值）



普通线段树更关注数本身的信息比如最大值、最小值和区间和等信息，但权值线段树更关注所有数据总共的统计信息。



## 权值线段树和简单线段树的区别

权值线段树维护的是桶，**按值域开空间，维护的是个数**。

简单线段树维护的是信息，**按个数开空间，维护的是特定信息**。

